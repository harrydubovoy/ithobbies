"use strict";$(document).ready(function(){autosize($("textarea"));$(".js-menu").on("click",function(){return $(this).toggleClass("menu_active"),$(this).hasClass("menu_active")?($("html, body").css({overflow:"hidden",height:"100%"}),$(".js-header").addClass("header__active"),$(".js-categories").addClass("categories_active")):(setTimeout(function(){$("html, body").css({overflow:"visible",height:"auto"})},200),$(".js-header").removeClass("header_active"),$(".js-categories").removeClass("categories_active")),!1}),$(".js-search").on("click",function(){return $(".js-header__search").toggleClass("header__search_active"),!1});var a=$(".js-comments__name"),e=$(".js-comment-body");a.on("click",function(){var a=$(this).data("name");e.text("".concat(a,", ")),e.next().addClass("active")});function v(a){var e=$("#modalSuccess");e.modal("show"),e.find(".js-modal-success-text").html(a)}function r(){var a=$("#modalError");a.modal("show"),a.find(".js-modal-error-text").html("Что-то пошло не так :( <br/> Попробуйте еще раз или позже")}function c(a){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())}$(".js-comment-form").on("submit",function(a){a.preventDefault();var e=$(this),s=e.data("id"),t=e.find(".js-comment-name"),n=e.find(".js-comment-email"),l=e.find(".js-comment-body"),i=e.find(".js-result-message"),o=[],d={};""===t.val()?(t.addClass("invalid"),i.text("Поле обязательное"),o.push(!1)):(t.removeClass("invalid"),o.push(!0)),""===l.val()?(l.addClass("invalid"),i.text("Поле обязательное"),o.push(!1)):(l.removeClass("invalid"),o.push(!0)),""===n.val()?(n.addClass("invalid"),i.text("Поле обязательное"),o.push(!1)):""===n.val()||c(n.val())?(n.removeClass("invalid"),o.push(!0)):(n.addClass("invalid"),i.text("Не верный Email"),o.push(!1)),o.every(function(a){return a})&&(d={id:s,author:t.val(),email:n.val(),text:l.val()},i.text(""),t.val("").next().removeClass("active"),n.val("").next().removeClass("active"),l.val("").next().removeClass("active"),autosize.update(l),$.ajax({method:"POST",url:"/add-comment",data:d}).done(function(a){v("Спасибо! <br/> Ваш коментарий отправлен на модерацию"),console.log(a)}).fail(function(a){r(),console.log(a)}))});var d=$("#modalContactForm"),m=$(".js-contact-form");m.on("submit",function(a){a.preventDefault();var e=$(this),s=e.find(".js-contact-name"),t=e.find(".js-contact-email"),n=e.find(".js-contact-message"),l=e.find(".js-result-message"),i=[],o={};""===s.val()?(s.addClass("invalid"),l.text("Поле обязательное"),i.push(!1)):(s.removeClass("invalid"),i.push(!0)),""===n.val()?(n.addClass("invalid"),l.text("Поле обязательное"),i.push(!1)):(n.removeClass("invalid"),i.push(!0)),""===t.val()?(t.addClass("invalid"),l.text("Поле обязательное"),i.push(!1)):""===t.val()||c(t.val())?(t.removeClass("invalid"),i.push(!0)):(t.addClass("invalid"),l.text("Не верный Email"),i.push(!1)),i.every(function(a){return a})&&(o={name:s.val(),email:t.val(),message:n.val()},l.text(""),s.val("").next().removeClass("active"),t.val("").next().removeClass("active"),n.val("").next().removeClass("active"),m.parent().addClass("modal-content--sending"),$.ajax({method:"POST",url:"/send-mail",data:o}).done(function(a){d.modal("hide"),v("Спасибо за Ваше сообщение! <br/> В ближаййшее время мы с Вами свяжемся"),m.parent().removeClass("modal-content--sending")}).fail(function(a){r(),console.log(a)}))})});
//# sourceMappingURL=project.js.map
