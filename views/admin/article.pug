extends layout

include components/title

block title
    title!= title

block content
    - const id = post._id
    - const image = post.image
    - const header = post.title
    - const description = post.description
    - const content = post.content
    - const published = post.published
    - const category = post.category

    +title(page)
    div
        form(action=`/admin/${action}`, method='POST' enctype='multipart/form-data')
            fieldset.uk-fieldset
                if id
                    input(hidden, name='id', value=id)
                .uk-height-medium.uk-flex.uk-flex-center.uk-flex-middle.uk-background-cover.uk-light(data-src=`${image ? `/uploads/images/${image}` : '/images/default/default-img.png'}`, data-sizes='(min-width: 650px) 650px, 100vw', uk-img='')
                .uk-margin
                    span.uk-text-middle Here is a image upload -
                    div(uk-form-custom='')
                        input.js-upload-input(type='file' name='image')
                        span.uk-link.js-upload-file= image ? image : 'No image'
                .uk-margin
                    label.uk-form-label Title
                    .uk-form-controls
                        input.uk-input(type='text' name='title' value=header)
                .uk-margin
                    label.uk-form-label Description
                    .uk-form-controls
                        textarea.uk-textarea(rows='5', name='description')= description
                .uk-margin
                    label.uk-form-label Article
                    textarea#editor.uk-textarea(rows='5' name='content')= content
                .uk-margin
                    .uk-grid-small.uk-flex-middle(uk-grid='')
                        .uk-width-1-3
                            select(name='category').uk-select
                                if category
                                    - const id = category.id
                                    - const name = category.name
                                    option(value=id)= name
                                else
                                    option(value='') Choose category
                                if categories
                                    each item in categories
                                        - const id = item._id
                                        - const name = item.name
                                        - const slug = item.slug

                                        option(value=`${id}`)= name

                        .uk-form-label.uk-margin-auto-left
                            strong Status:
                        .uk-form-controls
                            label.uk-margin-right
                                input.uk-radio.uk-margin-small-right(type='radio', name='published', value='false', checked=!published)
                                | Draft
                            label
                                input.uk-radio.uk-margin-small-right(type='radio', name='published', value='true', checked=published)
                                | Public

                .uk-margin-large-top.uk-text-right
                    a.uk-button.uk-button-default.uk-margin-small-right(href='/admin/posts') Cancel
                    button.uk-button.uk-button-primary(type='submit') Save